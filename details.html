<!-- a search bar that allows user to input the city or cities they want to explore -->

<!DOCTYPE html>
<html>
  <head>
  <!-- <link rel="stylesheet" type="text/css" media='all' href="CSS/index.css"> -->
    <link href="../../bootstrap-3.3.1-dist/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="shortcut icon" href='http://104.36.83.116/favicon.ico' type="image/x-icon">
    <link rel="icon" href="http://104.36.83.116/favicon.ico" type="image/x-icon">
    <title>Details</title>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <style>
      html, body, #map-canvas {
        height: 100%;
        margin: 20px;
        padding: 0px;
		/*display: none;*/
      }

      #map-canvas {
      	display: none;
      }

      .controls {
        margin-top: 16px;
        margin-left: 5px;
        margin-right: 5px;
        border: 1px solid transparent;
        border-radius: 2px 0 0 2px;
        box-sizing: border-box;
        -moz-box-sizing: border-box;
        height: 32px;
        outline: none;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
        background-color: #fff;
        padding: 0 11px 0 13px;
        width: 400px;
        font-family: Roboto;
        font-size: 15px;
        font-weight: 300;
        text-overflow: ellipsis;
        border-color: #4d90fe;
        margin-left: -1px;
        padding-left: 14px;  /* Regular padding-left + 1. */
        width: 401px;
      }

      .pac-container {
        font-family: Roboto;
      }

      #type-selector {
        color: #fff;
        background-color: #4d90fe;
        padding: 5px 11px 0px 11px;
      }

      #type-selector label {
        font-family: Roboto;
        font-size: 13px;
        font-weight: 300;
      }

      a {
        margin-right: 5px;
        font-size: 15px;
        font-weight: 300;
        font-family: Roboto;
      }
      button {
        margin-left: 80%;
        font-family: Roboto;
        font-size: 13px;
      }
}

    </style>
    <title>Places search box</title>
    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&libraries=places"></script>
    <script src="http://code.jquery.com/jquery-1.11.1.js"></script>
    <script>
// This example adds a search box to a map, using the Google Place Autocomplete
// feature. People can enter geographical searches. The search box will return a
// pick list containing a mix of places and predicted search terms.
list_of_places = [];
var all_cities = [[0], ['home']];
function initialize() {

  var markers = [];
  var map = new google.maps.Map(document.getElementById('map-canvas'), {
    mapTypeId: google.maps.MapTypeId.ROADMAP
  });
// later make default bound current location
  var defaultBounds = new google.maps.LatLngBounds(
      new google.maps.LatLng(-33.8902, 151.1759),
      new google.maps.LatLng(-33.8474, 151.2631));
  map.fitBounds(defaultBounds);

  // Create the search box and link it to the UI element.
  var input = /** @type {HTMLInputElement} */(
      document.getElementById('pac-input'));
  var input1 = /** @type {HTMLInputElement} */(
      document.getElementById('pac-input1'));
  var input2 = /** @type {HTMLInputElement} */(
      document.getElementById('pac-input2'));
  var input3 = /** @type {HTMLInputElement} */(
      document.getElementById('pac-input3'));
  var input4 = /** @type {HTMLInputElement} */(
      document.getElementById('pac-input4'));
  var input5 = /** @type {HTMLInputElement} */(
      document.getElementById('pac-input5'));

  // map.controls[google.maps.ControlPosition.TOP_LEFT].push(input);

  var searchBox = new google.maps.places.SearchBox(
    /** @type {HTMLInputElement} */(input));
  var searchBox1 = new google.maps.places.SearchBox(
    /** @type {HTMLInputElement} */(input1));
  var searchBox2 = new google.maps.places.SearchBox(
    /** @type {HTMLInputElement} */(input2));
  var searchBox3 = new google.maps.places.SearchBox(
    /** @type {HTMLInputElement} */(input3));
  var searchBox4 = new google.maps.places.SearchBox(
    /** @type {HTMLInputElement} */(input4));
  var searchBox5 = new google.maps.places.SearchBox(
    /** @type {HTMLInputElement} */(input5));

  google.maps.event.addListener(searchBox5, 'places_changed', function() {
    var places = searchBox5.getPlaces();

    var city = places[0].address_components[0].long_name;
    all_cities[0][5] = city;

    if (places.length == 0) {
      return;
    }
    for (var i = 0, marker; marker = markers[i]; i++) {
      marker.setMap(null);
    }

});

  google.maps.event.addListener(searchBox4, 'places_changed', function() {
    var places = searchBox4.getPlaces();

    var city = places[0].address_components[0].long_name;
    all_cities[0][4] = city;

    if (places.length == 0) {
      return;
    }
    for (var i = 0, marker; marker = markers[i]; i++) {
      marker.setMap(null);
    }

});

  google.maps.event.addListener(searchBox3, 'places_changed', function() {
    var places = searchBox3.getPlaces();

    var city = places[0].address_components[0].long_name;
    all_cities[0][3] = city;

    if (places.length == 0) {
      return;
    }
    for (var i = 0, marker; marker = markers[i]; i++) {
      marker.setMap(null);
    }

});


  google.maps.event.addListener(searchBox2, 'places_changed', function() {
    var places = searchBox2.getPlaces();
  
    var city = places[0].address_components[0].long_name;
    all_cities[0][2] = city;

    if (places.length == 0) {
      return;
    }
    for (var i = 0, marker; marker = markers[i]; i++) {
      marker.setMap(null);
    }

});

  google.maps.event.addListener(searchBox1, 'places_changed', function() {
    var places = searchBox1.getPlaces();

    var city = places[0].address_components[0].long_name;
    all_cities[0][1] = city;

    if (places.length == 0) {
      return;
    }
    for (var i = 0, marker; marker = markers[i]; i++) {
      marker.setMap(null);
    }

});

	google.maps.event.addListener(searchBox, 'places_changed', function() {
    var places = searchBox.getPlaces();

    var city = places[0].address_components[0].long_name;
    all_cities[0][0] = city;

    if (places.length == 0) {
      return;
    }
    for (var i = 0, marker; marker = markers[i]; i++) {
      marker.setMap(null);
    }
  });
}

google.maps.event.addDomListener(window, 'load', initialize);

    </script>
    <style>
      #target {
        width: 345px;
      }
    </style>
  </head>
  <body>
    <div id='title'> <h1 id = 'timerange'>Daily Time Range</h1></div>
    <ul style="list-style-type:none">
    <select name='start' id='start' onchange='getSelectedTime("start", 0)' class= "controls" type="text">
    <option value="" disabled selected>Start</option>
    <option value=8>8 a.m.</option>
    <option value=9>9 a.m.</option>
    <option value=10>10 a.m.</option>
    <option value=11>11 a.m.</option>
    <option value=12>12 a.m.</option>
    </select>   <a>till</a>
    <select name='end' id='end' onchange='getSelectedTime("end", 1)' class= "controls" type="text">
    <option value="" disabled selected>End</option>
    <option value=20>8 p.m.</option>
    <option value=21>9 p.m.</option>
    <option value=22>10 p.m.</option>
    <option value=23>11 p.m.</option>
    <option value=24>12 p.m.</option>
    </select>
    </ul>

    <div id='title'> <h1 id = 'accomodation'>Place of Accomodation</h1></div>
      <ul style="list-style-type:none">
      <input id="pac-input" class="controls" type="text" placeholder="Enter Location">
      </ul>

  	<div id='title'> <h1 id = 'city'>Places of Interest</h1></div>

    <ul style="list-style-type:none">
    		<li><input id="pac-input1" class="controls" type="text" placeholder="Enter Location"><select name='duration1' id='duration1' onchange='getSelectedValue("duration1", 1)' class="controls" type="text">
          <option value="" disabled selected>How long do you wanna be here?</option>
          <option value=1>1 hour</option>
          <option value=2>2 hours</option>
          <option value=3>3 hours</option>
          <option value=4>4 hours</option>
          <option value=5>5 hours</option>
          <option value=6>6 hours</option>
          <option value=9>9 hours</option>
          <option value=12>12 hours</option>
          <option value="Entire">Entire day</option>
          </select></li>
    		<li><input id="pac-input2" class="controls" type="text" placeholder="Enter Location"><select name='duration2' id='duration2' onchange='getSelectedValue("duration2", 2)'class="controls" type="text">
          <option value="" disabled selected>How long do you wanna be here?</option>
          <option value=1>1 hour</option>
          <option value=2>2 hours</option>
          <option value=3>3 hours</option>
          <option value=4>4 hours</option>
          <option value=5>5 hours</option>
          <option value=6>6 hours</option>
          <option value=9>9 hours</option>
          <option value=12>12 hours</option>
          <option value="Entire">Entire day</option>
          </select></li>
        <li><input id="pac-input3" class="controls" type="text" placeholder="Enter Location"><select name='duration3' id='duration3' onchange='getSelectedValue("duration3", 3)'class="controls" type="text">
          <option value="" disabled selected>How long do you wanna be here?</option>
         <option value=1>1 hour</option>
          <option value=2>2 hours</option>
          <option value=3>3 hours</option>
          <option value=4>4 hours</option>
          <option value=5>5 hours</option>
          <option value=6>6 hours</option>
          <option value=9>9 hours</option>
          <option value=12>12 hours</option>
          <option value="Entire">Entire day</option>
          </select></li>
        <li><input id="pac-input4" class="controls" type="text" placeholder="Enter Location"><select name='duration4' id='duration4' onchange='getSelectedValue("duration4", 4)' class="controls" type="text">
          <option value="" disabled selected>How long do you wanna be here?</option>
          <option value=1>1 hour</option>
          <option value=2>2 hours</option>
          <option value=3>3 hours</option>
          <option value=4>4 hours</option>
          <option value=5>5 hours</option>
          <option value=6>6 hours</option>
          <option value=9>9 hours</option>
          <option value=12>12 hours</option>
          <option value="Entire">Entire day</option>
          </select></li>
        <li><input id="pac-input5" class="controls" type="text" placeholder="Enter Location"><select name='duration5' id='duration5' onchange='getSelectedValue("duration5", 5)'class="controls" type="text">
          <option id = 'duration5' value="" disabled selected>How long do you wanna be here?</option>
          <option value=1>1 hour</option>
          <option value=2>2 hours</option>
          <option value=3>3 hours</option>
          <option value=4>4 hours</option>
          <option value=5>5 hours</option>
          <option value=6>6 hours</option>
          <option value=9>9 hours</option>
          <option value=12>12 hours</option>
          <option value="Entire">Entire day</option>
          </select></li>
	    <div id="map-canvas"></div>
    </ul>

    <button onclick = 'create_data()'>Send</button>

	    </div>

		<script type="text/javascript">
    time_range = [];

    function getSelectedValue(id, num) {  
      all_cities[1][num] = document.getElementById(id).value;    
    }  

    function getSelectedTime(id, num) {
      time_range[num] = document.getElementById(id).value;
    }

    function print_test(){
      console.log('test');
    }

    function place(location, duration) {
      this.location = location;
      this.duration = duration;
    }

		function create_data(){
      // console.log(oForm.elements["duration1"].selectedIndex)
      for (var i = 0; i < all_cities[0].length; i++) {

          var loc = all_cities[0][i];
          var dur = all_cities[1][i];
          list_of_places.push(new place(loc, dur));
      };
      window.location.assign("/plan?places=" + all_cities[0] + '&duration=' + all_cities[1] + '&time_range=' + time_range)
    }

		</script>
  </body>
</html>